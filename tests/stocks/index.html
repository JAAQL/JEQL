<!DOCTYPE html>
<html lang="en">
	<title id="page-title">JEQL - Stocks App</title>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script type="text/javascript" src="../../JEQL.js"></script>
		<link rel="stylesheet" href="../../JEQL.css">
		<script type="text/javascript" src="../testbed.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/default.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/highlight.min.js"></script>
		<script>hljs.highlightAll();</script>
	</head>
	<body>
		<h1>JEQL Examples</h1>
		<h2>Contents</h2>
		<ul class="jeql-test-contents" id="test-contents"></ul>

		<div class="jeql-test">
			<h2>Select From Table</h2>
			<h3>JEQL Code</h3>
			<pre><code class="language-javascript hljs">JEQL.submit({
    "query": "SELECT * FROM jaaql_test_schema.exchange WHERE incorporation_date > :incorporation_date",
    "parameters": {
        "incorporation_date": "1800/01/01"
    },
    "render": function(container, render, response) {
        setTestResult("jeql-result-1", response);
    },
    "error": function(status, response, message) {
        alert(message);
        JEQL.halt(message);
    }
});</code></pre>
			<h3>Result</h3>
			<pre><code id="jeql-result-1" class="language-json hljs"></code></pre>
		</div>
		
		<div class="jeql-test">
			<h2>Select From Table Rendering Tuples</h2>
			<h3>JEQL Code</h3>
			<pre><code class="language-javascript hljs">JEQL.submit({
    "query": "SELECT * FROM jaaql_test_schema.exchange WHERE incorporation_date > :incorporation_date",
    "parameters": {
        "incorporation_date": "1800/01/01"
    },
    "render": function(container, render, response) {
        setTestResult("jeql-result-2", response);
    },
	"tuples": true,
    "error": function(status, response, message) {
        alert(message);
        JEQL.halt(message);
    }
});</code></pre>
			<h3>Result</h3>
			<pre><code id="jeql-result-2" class="language-json hljs"></code></pre>
		</div>
		
		<div class="jeql-test">
			<h2>Pivot on Result</h2>
			<h3>JEQL Code</h3>
			<pre><code class="language-javascript hljs">JEQL.submit({
    "query": "SELECT name, country, incorporation_date, symbol, started_trading FROM jaaql_test_schema.exchange ex LEFT JOIN jaaql_test_schema.ticker ti ON ti.exchange = ex.name",
    "render": function(container, render, response) {
        setTestResult("jeql-result-3", response);
    },
    "pivot": { "tickers": "symbol" },
    "error": function(status, response, message) {
        alert(message);
        JEQL.halt(message);
    }
});</code></pre>
			<h3>Result</h3>
			<pre><code id="jeql-result-3" class="language-json hljs"></code></pre>
		</div>
		
		<div class="jeql-test">
			<h2>Pivot on Result Rendering Tuples</h2>
			<h3>JEQL Code</h3>
			<pre><code class="language-javascript hljs">JEQL.submit({
    "query": "SELECT name, country, incorporation_date, symbol, started_trading FROM jaaql_test_schema.exchange ex LEFT JOIN jaaql_test_schema.ticker ti ON ti.exchange = ex.name;",
    "render": function(container, render, response) {
        setTestResult("jeql-result-4", response);
    },
    "pivot": { "tickers": "symbol" },
    "tuples": true,
    "error": function(status, response, message) {
        alert(message);
        JEQL.halt(message);
    }
});</code></pre>
			<h3>Result</h3>
			<pre><code id="jeql-result-4" class="language-json hljs"></code></pre>
		</div>

		<div class="jeql-test">
			<h2>Multi Pivot on Result</h2>
			<h3>JEQL Code</h3>
			<pre><code class="language-javascript hljs">JEQL.submit({
    "query": "SELECT ex.name, ex.country, ex.incorporation_date, ti.symbol, ti.started_trading, tda.date, tda.volume FROM jaaql_test_schema.exchange ex LEFT JOIN jaaql_test_schema.ticker ti ON ti.exchange = ex.name LEFT JOIN jaaql_test_schema.ticker_daily_aggregates tda ON tda.exchange = ti.exchange AND tda.symbol = ti.symbol ORDER BY ex.name, ti.symbol, tda.date",
    "render": function(container, render, response) {
        setTestResult("jeql-result-5", response);
    },
    "pivot": { "tickers": "symbol", "days": "date" },
    "error": function(status, response, message) {
        alert(message);
        JEQL.halt(message);
    }
});</code></pre>
			<h3>Result</h3>
			<pre><code id="jeql-result-5" class="language-json hljs"></code></pre>
		</div>

		<div class="jeql-test">
			<h2>Multi Pivot on Result Rendering Tuples</h2>
			<h3>JEQL Code</h3>
			<pre><code class="language-javascript hljs">JEQL.submit({
    "query": "SELECT ex.name, ex.country, ex.incorporation_date, ti.symbol, ti.started_trading, tda.date, tda.volume FROM jaaql_test_schema.exchange ex LEFT JOIN jaaql_test_schema.ticker ti ON ti.exchange = ex.name LEFT JOIN jaaql_test_schema.ticker_daily_aggregates tda ON tda.exchange = ti.exchange AND tda.symbol = ti.symbol ORDER BY ex.name, ti.symbol, tda.date",
    "render": function(container, render, response) {
        setTestResult("jeql-result-6", response);
    },
    "pivot": { "tickers": "symbol", "days": "date" },
    "tuples": true,
    "error": function(status, response, message) {
        alert(message);
        JEQL.halt(message);
    }
});</code></pre>
			<h3>Result</h3>
			<pre><code id="jeql-result-6" class="language-json hljs"></code></pre>
		</div>
	</body>
</html>