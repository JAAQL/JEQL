!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JEQL=t():e.JEQL=t()}(self,(()=>(()=>{var e={576:()=>{function e(e,t){let n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.href=e,n.id=t,n}function t(e,t){null===document.getElementById(t.id)&&e.appendChild(t)}!function(){let n="";n=document.currentScript?document.currentScript.src.split("/").slice(0,-1).join("/")+"/":"file:"===window.location.protocol?"../../../../JEQL/":"/apps/JEQL/";let i=document.getElementsByTagName("head")[0];t(i,function(e,t){let n=document.createElement("link");return n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap",n.id="jeql_css_font",n}()),t(i,e(n+"JEQL.css","jeql_css_main")),t(i,e(n+"spinner/spinner.css","jeql_css_spinner"))}()}},t={};function n(i){var l=t[i];if(void 0!==l)return l.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";n.d(i,{default:()=>ei});var e={};n.r(e),n.d(e,{HTTP_STATUS_DEFAULT:()=>r,RequestConfig:()=>u,jsonToUrlEncoded:()=>a,make:()=>f,makeBody:()=>h,makeEmpty:()=>b,makeJson:()=>T,makeSimple:()=>A,urlEncodedToJson:()=>d});var t={};function l(){let e=document.createElement("div");e.setAttribute("class","jeql-spinner-outer");let t=document.createElement("div");t.setAttribute("class","jeql-spinner"),e.appendChild(t),document.body.appendChild(e)}function o(){document.body.removeChild(document.getElementsByClassName("jeql-spinner-outer")[0])}n.r(t),n.d(t,{ACTION_INTERNAL_APPLICATIONS:()=>X,ACTION_INTERNAL_APPLICATIONS_ADD:()=>Z,ACTION_INTERNAL_APPLICATIONS_DEL:()=>ee,ACTION_INTERNAL_APPLICATIONS_DELCONF:()=>te,ACTION_INTERNAL_ASSIGNED_DATABASES:()=>le,ACTION_INTERNAL_ASSIGNED_DATABASE_ADD:()=>oe,ACTION_INTERNAL_ASSIGNED_DATABASE_DEL:()=>re,ACTION_INTERNAL_ASSIGNED_DATABASE_DELCONF:()=>ue,ACTION_INTERNAL_CONFIG:()=>ae,ACTION_INTERNAL_CONFIG_ADD:()=>se,ACTION_INTERNAL_CONFIG_AUTH:()=>pe,ACTION_INTERNAL_CONFIG_AUTH_ADD:()=>me,ACTION_INTERNAL_CONFIG_AUTH_DEL:()=>Ee,ACTION_INTERNAL_CONFIG_AUTH_DELCONF:()=>fe,ACTION_INTERNAL_CONFIG_DEL:()=>ce,ACTION_INTERNAL_CONFIG_DELCONF:()=>de,ACTION_INTERNAL_DATABASES:()=>$,ACTION_INTERNAL_DATABASES_ADD:()=>W,ACTION_INTERNAL_DATABASES_DEL:()=>z,ACTION_INTERNAL_DATABASES_DELCONF:()=>V,ACTION_INTERNAL_DATASETS:()=>Te,ACTION_INTERNAL_DATASETS_ADD:()=>he,ACTION_INTERNAL_DATASETS_DEL:()=>be,ACTION_INTERNAL_DATASETS_DELCONF:()=>Ae,ACTION_INTERNAL_EMAIL_ACCOUNTS:()=>w,ACTION_INTERNAL_EMAIL_ACCOUNTS_ADD:()=>B,ACTION_INTERNAL_EMAIL_ACCOUNTS_DEL:()=>P,ACTION_INTERNAL_EMAIL_ACCOUNTS_DELCONF:()=>k,ACTION_INTERNAL_EMAIL_TEMPLATES:()=>M,ACTION_INTERNAL_EMAIL_TEMPLATES_ADD:()=>R,ACTION_INTERNAL_EMAIL_TEMPLATES_DEL:()=>q,ACTION_INTERNAL_EMAIL_TEMPLATES_DELCONF:()=>x,ACTION_INTERNAL_NODES:()=>F,ACTION_INTERNAL_NODES_ADD:()=>G,ACTION_INTERNAL_NODES_DEL:()=>H,ACTION_INTERNAL_NODES_DELCONF:()=>U,ACTION_INTERNAL_NODE_AUTHS:()=>J,ACTION_INTERNAL_NODE_AUTHS_ADD:()=>Y,ACTION_INTERNAL_NODE_AUTHS_DEL:()=>K,ACTION_INTERNAL_NODE_AUTHS_DELCONF:()=>Q,CLS_BUTTON:()=>ct,CLS_BUTTON_NO:()=>pt,CLS_BUTTON_YES:()=>dt,CLS_MODAL:()=>rt,CLS_MODAL_AUTO:()=>st,CLS_MODAL_WIDE:()=>ut,CLS_MODAL_WIDEST:()=>at,HTTP_STATUS_ACCEPTED:()=>I,HTTP_STATUS_DEFAULT:()=>_,HTTP_STATUS_OK:()=>g,KEY_ACCOUNT:()=>Re,KEY_ADDRESS:()=>Pe,KEY_ALLOW_CONFIRM_SIGNUP_ATTEMPT:()=>qe,KEY_ALLOW_SIGNUP:()=>xe,KEY_APPLICATION:()=>He,KEY_APP_RELATIVE_PATH:()=>nt,KEY_COLUMNS:()=>we,KEY_CONFIGURATION:()=>Ge,KEY_CREATE:()=>Xe,KEY_CREATE_USERNAME:()=>et,KEY_DATA:()=>Ve,KEY_DATABASE:()=>ve,KEY_DATASET:()=>Ce,KEY_DATA_VALIDATION_TABLE:()=>it,KEY_DATA_VALIDATION_VIEW:()=>lt,KEY_DEFAULT_EMAIL_ALREADY_SIGNED_UP_TEMPLATE:()=>Ie,KEY_DEFAULT_EMAIL_SIGNUP_TEMPLATE:()=>ge,KEY_DELETED:()=>ke,KEY_DESCRIPTION:()=>Ue,KEY_DROP:()=>Ze,KEY_EMAIL:()=>_e,KEY_EXISTING_USER_TEMPLATE:()=>Se,KEY_FORCE_TRANSACTIONAL:()=>De,KEY_HOST:()=>ze,KEY_NAME:()=>$e,KEY_NODE:()=>Oe,KEY_PARAMETERS:()=>Le,KEY_PASSWORD:()=>Fe,KEY_PORT:()=>Be,KEY_PRECEDENCE:()=>Qe,KEY_PROTOCOL:()=>ye,KEY_PUBLIC_USERNAME:()=>Ye,KEY_RECIPIENT_VALIDATION_VIEW:()=>ot,KEY_ROLE:()=>Ke,KEY_ROWS:()=>je,KEY_SEND_NAME:()=>We,KEY_SUBJECT:()=>tt,KEY_TEMPLATE:()=>Ne,KEY_URL:()=>Je,KEY_USERNAME:()=>Me,SIGNUP_ALREADY_REGISTERED:()=>O,SIGNUP_COMPLETED:()=>y,SIGNUP_NOT_STARTED:()=>L,SIGNUP_STARTED:()=>C,doConfirmDelete:()=>Ht,elemBuilder:()=>tn,fetchMyApplications:()=>wn,finishSignup:()=>qn,foreach:()=>Dn,formQuery:()=>Kn,formatAsTableHeader:()=>bn,getAppUrl:()=>Bn,getBuildableById:()=>nn,getOrInitJEQLConfig:()=>Mn,getOrSelectAppConfig:()=>Sn,getPagedSearchingTableRefreshButton:()=>Yt,getSearchObj:()=>Ft,init:()=>Rn,initPublic:()=>kn,login:()=>En,makeBuildable:()=>en,modalExists:()=>Gt,objectsToTuples:()=>Xt,pagedSearchingTable:()=>Qt,pagedTableUpdate:()=>Jt,prepareQuery:()=>yn,render:()=>jn,renderLoginInPage:()=>mn,renderModal:()=>on,renderModalAreYouSure:()=>an,renderModalError:()=>un,renderModalOk:()=>rn,requests:()=>e,script:()=>On,scriptParent:()=>Cn,scriptPrior:()=>vn,setPagedSearchingTableSortField:()=>Kt,signup:()=>xn,signupStatus:()=>Hn,signupStatusWithCode:()=>Un,signupWithToken:()=>Fn,signupWithTokenAndLogin:()=>Gn,simpleSearchTransformer:()=>Ut,submit:()=>$n,submitFile:()=>Qn,tableRenderer:()=>Zt,tupleToObject:()=>zt,tuplesToObjects:()=>Vt}),n(576);let r="DEFAULT";class u{constructor(e,t,n,i,r,u,a,s,c,d,p,m=null,E=null,f=l,T=o){this.base=t,this.authLocked=!0,this.authQueue=[],this.applicationName=e,this.username=null,this.authAction=n,this.refreshAction=i,this.loginFunc=r,this.refreshFunc=u,this.authToken=null,this.usernameField=d,this.reloadAppConfigFunc=p,this.createSpinner=f,this.destroySpinner=T,this.authTokenSetFunc=m,this.setXHttpAuth=a,this.rememberMe=!0,this.logoutFunc=E,this.parent=null,this.submitActions=s,this._setConnectionAction=c,this.setConnectionAction=function(e){c(this,e)},this.credentials=null}setCredentials(e){this.credentials=e}setRememberMe(e){this.rememberMe=e,this.parent&&(parent.rememberMe=e)}clone(){let e=new u(this.applicationName,this.base,this.authAction,this.refreshAction,this.loginFunc,this.refreshFunc,this.setXHttpAuth,this.submitActions,this._setConnectionAction,this.usernameField,this.reloadAppConfigFunc,this.authTokenSetFunc,this.logoutFunc,this.createSpinner,this.destroySpinner);return e.rememberMe=this.rememberMe,e.parent=this,e.authLocked=!1,e.setCredentials(this.credentials),e}getApplicationName(){return this.applicationName}getStorage(){return this.rememberMe?window.localStorage:window.sessionStorage}getInvertedStorage(){return this.rememberMe?window.sessionStorage:window.localStorage}logout(e=!0,t=!1){this.credentials=null,this.username=null,this.resetAuthToken(),null!==this.loginFunc&&this.logoutFunc(this.getStorage(),e,t,this.getInvertedStorage()),null!==this.parent&&this.parent.logout()}resetAuthToken(){this.authToken=null,null!==this.authTokenSetFunc&&this.authTokenSetFunc(this.getStorage(),this.authToken),null!==this.parent&&this.parent.resetAuthToken()}releaseQueues(){for(this.authLocked=!1;0!==this.authQueue.length;)this.authQueue.pop()();null!==this.parent&&this.parent.releaseQueues()}setAuthToken(e,t){let n=!1;return this.username&&this.username!==t&&t&&(this.logout(!1),this.username=t,n=!0),this.authToken=e,null!==this.authTokenSetFunc&&this.authTokenSetFunc(this.getStorage(),this.authToken),null!==this.parent&&this.parent.setAuthToken(e,t),n}}function a(e,t,n){if(n=n||[],"object"==typeof e)for(let i in e)a(e[i],t?t+"["+i+"]":i,n);else n.push(t+"="+encodeURIComponent(e));return n.join("&")}function s(){return document.currentScript?document.currentScript.parentElement:null}function c(){return document.currentScript?document.currentScript:null}function d(e){let t=Array.from(e.split("&")),n={};for(let e in t)n[t[e].split("=")[0]]=decodeURIComponent(t[e].split("=")[1]);return n}function p(e){return e.getResponseHeader("Content-Type").startsWith("application/json")?JSON.parse(e.response):e.response}function m(e,t,n){if("GET"===e){if(t)return"?"+t;if(n)throw new Error("Please make GET requests passing to the body argument, not json")}return""}function E(e,t,n,i,l){e.createSpinner(),i&&!l&&"GET"!==n?(t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(i)):l&&!i&&"GET"!==n?(t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.send(l)):l&&i&&"GET"!==n?alert("Tell the developer off! They've provided both json and body data. Naughty"):t.send()}function f(e,t,n,i,l,o=!0,u=null){let a=s(),d=c();if(e.authLocked&&!o)return void e.authQueue.push((function(){document.currentScriptParent=a,document.theCurrentScript=d,f(e,t,n,i,l)}));let T=t.split(" ")[1],h=e.base+T,b=t.split(" ")[0],A=t===e.authAction,_=t===e.refreshAction;if(null===e.authToken&&!A){let o=function(){f(e,t,n,i,l)};return void e.loginFunc(e,o)}let g=new XMLHttpRequest;g.onreadystatechange=function(){let o=null,a=null;4===this.readyState&&(e.destroySpinner(),a=n,n=function(e,t){return e?e.constructor===Object?e.hasOwnProperty(t)?e[t]:null:200===t?e:null:null}(n,this.status),o=p(this)),4===this.readyState&&200===this.status?A?(e.setAuthToken(o,u)&&(n=function(){e.reloadAppConfigFunc(e,n)}),n()):_?n():n(o):4===this.readyState&&202===this.status?A&&a(o,!0):4===this.readyState&&401===this.status?A?a("Credentials incorrect. Please try again"):_?(e.resetAuthToken(),e.loginFunc(e,(function(){f(e,t,a,i,l)}),"Credentials expired. Please login again")):e.refreshFunc(e,(function(){f(e,t,a,i,l)})):4===this.readyState&&(A?n(this.response):null!==n?n(o,e,t,a,i,l):r in a?a[r](o,e,t,a,i,l):console.error("Unexpected response code from server: "+this.status+" response: "+this.response))},h+=m(b,i,l),g.open(b,h,!0),A||e.setXHttpAuth(e,g),E(e,g,b,i,l)}function T(e,t,n,i){if(e.authLocked){let l=s(),o=c();return void e.authQueue.push((function(){document.currentScriptParent=l,document.theCurrentScript=o,T(e,t,n,i)}))}e.submitActions.includes(t)&&e.setConnectionAction(i);let l=t===e.authAction,o=(e.refreshAction,null);l&&(o=i[e.usernameField]),f(e,t,n,void 0,JSON.stringify(i),!0,o)}function h(e,t,n,i){if(e.authLocked){let l=s(),o=c();e.authQueue.push((function(){document.currentScriptParent=l,document.theCurrentScript=o,h(e,t,n,i)}))}else f(e,t,n,a(i),void 0,!0)}function b(e,t,n){if(e.authLocked){let i=s(),l=c();e.authQueue.push((function(){document.currentScriptParent=i,document.theCurrentScript=l,b(e,t,n)}))}else f(e,t,n,void 0,void 0,!0)}function A(e,t,n,i,l,o=!0){let r=t.split(" ")[1],u=e.base+r,s=t.split(" ")[0];i&&(i=a(i)),l&&(l=JSON.stringify(l)),n||(n=function(){});let c=new XMLHttpRequest;if(o&&(c.onreadystatechange=function(){4===this.readyState&&e.destroySpinner();let t=n;"object"==typeof n&&(n=n[200]),4===this.readyState&&200===this.status?n(p(this)):4===this.readyState&&401===this.status?console.log("Unexpected credential challenge for request type simple"):4===this.readyState&&t[this.status](p(this))}),u+=m(s,i,l),c.open(s,u,o),E(e,c,s,i,l),!o)return e.destroySpinner(),p(c)}let _=r;console.log("Loaded JEQL library, version 2.2.3");let g=200,I=202,N="JAAQL_TOKENS",S="JAAQL_CONFIGS",L=0,C=1,O=2,y=3,v="POST /account/signup/request",D="POST /account/signup/activate",j="POST /oauth/token",w="GET /internal/emails/accounts",B="POST /internal/emails/accounts",P="DELETE /internal/emails/accounts",k="POST /internal/emails/accounts/confirm-deletion",M="GET /internal/emails/templates",R="POST /internal/emails/templates",q="DELETE /internal/emails/templates",x="POST /internal/emails/templates/confirm-deletion",F="GET /internal/nodes",G="POST /internal/nodes",H="DELETE /internal/nodes",U="POST /internal/nodes/confirm-deletion",J="GET /internal/nodes/credentials",Y="POST /internal/nodes/credentials",K="DELETE /internal/nodes/credentials",Q="POST /internal/nodes/credentials/confirm-deletion",$="GET /internal/databases",W="POST /internal/databases",z="DELETE /internal/databases",V="POST /internal/databases/confirm-deletion",X="GET /internal/applications",Z="POST /internal/applications",ee="DELETE /internal/applications",te="POST /internal/applications/confirm-deletion",ne="POST /submit",ie="POST /submit-file",le="GET /internal/applications/configurations/assigned-databases",oe="POST /internal/applications/configurations/assigned-databases",re="DELETE /internal/applications/configurations/assigned-databases",ue="POST /internal/applications/configurations/assigned-databases/confirm-deletion",ae="GET /internal/applications/configurations",se="POST /internal/applications/configurations",ce="DELETE /internal/applications/configurations",de="POST /internal/applications/configurations/confirm-deletion",pe="GET /internal/applications/configurations/authorizations",me="POST /internal/applications/configurations/authorizations",Ee="DELETE /internal/applications/configurations/authorizations",fe="POST /internal/applications/configurations/authorizations/confirm-deletion",Te="GET /internal/applications/datasets",he="POST /internal/applications/datasets",be="DELETE /internal/applications/datasets",Ae="POST /internal/applications/datasets/confirm-deletion",_e="email",ge="default_email_signup_template",Ie="default_email_already_signed_up_template",Ne="template",Se="existing_user_template",Le="parameters",Ce="dataset",Oe="node",ye="protocol",ve="database",De="force_transactional",je="rows",we="columns",Be="port",Pe="address",ke="deleted",Me="username",Re="account",qe="allow_confirm_signup_attempt",xe="allow_signup",Fe="password",Ge="configuration",He="application",Ue="description",Je="url",Ye="public_username",Ke="role",Qe="precedence",$e="name",We="send_name",ze="host",Ve="data",Xe="create",Ze="drop",et="create_username",tt="subject",nt="app_relative_path",it="data_validation_table",lt="data_validation_view",ot="recipient_validation_view",rt="jeql-modal",ut="jeql-modal-wide",at="jeql-modal-widest",st="jeql-modal-auto",ct="jeql-button",dt="jeql-button-yes",pt="jeql-button-no",mt="jeql-table-header-sort",Et="jeql-table-header-sort-span",ft="&nbsp;-",Tt="&nbsp;&#9650;",ht="&nbsp;&#9660;",bt="jeql-data",At="jeql-paging-table",_t="jeql-sort-direction",gt="jeql-login-error",It="jeql-username",Nt="jeql-password",St="jeql-remember-me",Lt="jeql-mfa-0",Ct="jeql-mfa-1",Ot="jeql-mfa-2",yt="jeql-mfa-3",vt="jeql-mfa-4",Dt="jeql-mfa-5",jt="jeql-login-button",wt="jeql-select-app-config-",Bt="refresh",Pt="filtered",kt="total",Mt="pages",Rt="size",qt="from",xt="sort";function Ft(e,t,n,i){let l={};return l.page=e,l.size=t,l.search=n,l.sort=i,l}function Gt(){return 0!==document.body.getElementsByClassName(rt).length}function Ht(e,t,n,i,l){h(window.JEQL_CONFIG,n,(function(e){(t={}).deletion_key=e.deletion_key,T(window.JEQL_CONFIG,i,l,t)}),t)}function Ut(e){return function(t){if(""===t)return t;let n="";for(let i=0;i<e.length;i++)0!==i&&(n+=" OR "),n+=e[i]+" LIKE '%"+t+"%'";return n}}function Jt(e,t){let n=e.id,i=n+"-"+Bt,l=n+"-"+kt,o=n+"-"+Pt,r=n+"-"+qt,u=n+"-to",a=document.getElementById(n+"-cur"),s=parseInt(a.innerText),c=document.getElementById(n+"-"+Mt),d=parseInt(document.getElementById(n+"-"+Rt).value),p=Math.ceil(t.records_filtered/d),m=function(e){a.innerText=e.target.innerHTML,document.getElementById(i).click()};if(c.innerHTML="",c.appendChild(tn("button").buildText("1").buildBoolean("disabled",1===s).buildEventListener("click",m)),s>3&&(p<8||4===s?c.appendChild(tn("button").buildText("2").buildBoolean("disabled",2===s).buildEventListener("click",m)):c.appendChild(tn("button").buildText("...").buildBoolean("disabled",!0))),p>6&&p===s){let e=s-4;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}if(p>5&&p-s<2&&s>5){let e=s-3;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}if(p>4&&p-s<3&&s>4){let e=s-2;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}if(p>1&&s-1!==p){let e=s>2?s-1:2;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}if(p>2&&s!==p){let e=s>3?s:3;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}if(p>3&&s<p&&(p!==s+1||4===p)){let e=s>3?s+1:4;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}if(p>6&&s<4){let e=5;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}if(p-s>2&&p>5)if(p<8||p-s<4){let e=p-1;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}else c.appendChild(tn("button").buildText("...").buildBoolean("disabled",!0));if(p>4||p===s&&(3===s||4===s)){let e=p;c.appendChild(tn("button").buildText(e.toString()).buildBoolean("disabled",s===e).buildEventListener("click",m))}document.getElementById(l).innerText=t.records_total,document.getElementById(o).innerText=t.records_filtered,0===t.records_filtered?document.getElementById(r).innerText="0":document.getElementById(r).innerText=(s*d-d+1).toString(),document.getElementById(u).innerText=Math.min(s*d,t.records_filtered).toString()}function Yt(e){return document.getElementById(e+"-"+Bt)}function Kt(e,t){document.getElementById(e+"-"+xt).innerText=t}function Qt(e,t,n=null){n||(n=function(e){return e}),en(e),e.buildBoolean(At,!0);let i=e.id,l=i+"-"+Bt,o=i+"-"+kt,r=i+"-"+Pt,u=i+"-"+Mt,a=i+"-"+Rt,s=i+"-"+qt,c=i+"-search",d=i+"-last-search",p=i+"-to",m=i+"-cur",E=i+"-"+xt;e.buildOlderSibling("div").buildHTML(`\n        <label>\n            Search: \n            <input type="text" id="${c}"/>\n        </label>\n        <label>\n            Page Size:\n            <select id="${a}">\n                <option value="10">10</option>\n                <option value="25">25</option>\n                <option value="50">50</option>\n                <option value="100">100</option>\n                <option value="250">250</option>\n                <option value="999999999">All</option>\n            </select>\n        </label>\n        <button id="${l}">Search</button>\n        <span id="${m}" style="display:none">1</span>\n        <span id="${E}" style="display:none"></span>\n        <span id="${d}" style="display:none"></span>\n    `),e.buildSibling("div").buildHTML(`\n        <div id="${u}"></div><div>Showing <span id="${s}"></span> to <span id="${p}"></span> of <span id="${r}"></span>/<span id="${o}"> records</span></div>\n    `),en(document.getElementById(u)),document.getElementById(a).addEventListener("change",(function(){document.getElementById(m).innerText="1",t(0,parseInt(document.getElementById(a).value),n(document.getElementById(c).value),document.getElementById(E).innerText)})),document.getElementById(l).addEventListener("click",(function(){document.getElementById(d).innerHTML!==document.getElementById(c).value&&(document.getElementById(m).innerText="1"),document.getElementById(d).value=document.getElementById(c).value,t(parseInt(document.getElementById(m).innerText)-1,parseInt(document.getElementById(a).value),n(document.getElementById(c).value),document.getElementById(E).innerText)})),t(0,10,n(document.getElementById(c).value),"")}function $t(e,t){let n=tn(t);return e.appendChild(n),n}function Wt(e,t){return e.innerHTML+=t,e}function zt(e,t){let n={};for(let i=0;i<t.length;i++)if(t[i].constructor===Object){let l=Object.keys(t[i])[0],o={};o[we]=t[i][l],o[je]=e[i],n[l]=Vt(o)}else n[t[i]]=e[i];return n}function Vt(e){let t=e[we],n=e[je],i=[];for(let e=0;e<n.length;e++)i.push(zt(n[e],t));return i}function Xt(e){let t={};t[we]=[],t[je]=[];for(let n=0;n<e.length;n++){0===n&&(t[we]=Object.keys(e[n]));let i=[];for(let l=0;l<t[we].length;l++)i.push(e[n][t[we][l]]);t[je].push(i)}return t}function Zt(e,t,n,i){i||(i=[]);let l=null,o=null;if(t){let e=t.getElementsByClassName(mt);for(let t=0;t<e.length;t++){let n=e[t].getElementsByClassName(Et)[0];n.getAttribute(_t)!==ft&&(l=e[t].childNodes[0].data,o=n.getAttribute(_t))}t.innerHTML="",en(t)}else t=tn(t),document.body.appendChild(t);let r=t.getAttribute(At),u=t.buildChild("tr");for(let n in Object.keys(e[we])){if(i.includes(e[we][n]))continue;let a=bn(e[we][n]),s=u.buildChild("th").buildClass("jeql-table-header").buildText(a);if(r){s.buildClass(mt);let i=s.buildChild("span").buildClass(Et).buildHTML(ft).buildAttr(_t,ft);a===l&&(i.buildAttr(_t,o),i.innerHTML=o),s.buildEventListener().buildEventListener("click",(function(){if(i.getAttribute(_t)===ft){i.innerHTML=Tt,i.setAttribute(_t,Tt);let l=t.getElementsByClassName(Et);for(let e=0;e<l.length;e++)l[e]!==i&&(l[e].setAttribute(_t,ft),l[e].innerHTML=ft);Kt(t.id,e[we][n]+" ASC")}else i.getAttribute(_t)===Tt?(i.innerHTML=ht,i.setAttribute(_t,ht),Kt(t.id,e[we][n]+" DESC")):(i.innerHTML=ft,i.setAttribute(_t,ft),Kt(t.id,""));Yt(t.id).click()}))}}u.buildChild("th");for(let l in e[je]){let o=t.buildChild("tr"),r=function(){let t=-1;for(let n in e[je][l])t+=1,i.includes(e[we][t])||o.buildChild("td").buildText(e[je][l][n])};n?n(o,e,l,r):r()}}function en(e){return e.removeElement=function(){e.parentNode.removeChild(e)},e.buildClass=function(t){return function(e,t){Array.isArray(t)||(t=[t]);for(let n in t)e.classList.add(t[n]);return e}(e,t)},e.buildAttr=function(t,n){return function(e,t,n){return e.setAttribute(t,n),e}(e,t,n)},e.buildBoolean=function(t,n){return function(e,t,n){return n&&e.setAttribute(t,t),e}(e,t,n)},e.buildText=function(t){return function(e,t){return e.innerText=t,e}(e,t)},e.buildHTML=function(t){return Wt(e,t)},e.resetHTML=function(t){return e.innerHTML="",Wt(e,t)},e.buildChild=function(t){return $t(e,t)},e.buildRow=function(){return $t(e,"tr")},e.buildForeach=function(t,n){for(let i=0;i<t.length;i++)e.buildHTML(n(t[i]));return e},e.getParent=function(){return en(e.parentNode)},e.buildSibling=function(t){return function(e,t){let n=tn(t);return e.after(n),n}(e,t)},e.buildEventListener=function(t,n){return function(e,t,n){return e.addEventListener(t,n),e}(e,t,n)},e.buildOlderSibling=function(t){return function(e,t){let n=tn(t);return e.parentNode.insertBefore(n,e),n}(e,t)},e}function tn(e){let t=document.createElement(e);return en(t),t}function nn(e){return en(document.getElementById(e))}function ln(e,t){t.setRequestHeader("Authentication-Token",e.authToken)}function on(e,t=!0,n=rt,i=null){let l=document.createElement("div");document.body.appendChild(l),l.setAttribute("class","jeql-modal-outer");let o=tn("div");if(l.appendChild(o),o.classList.add(n),null!==i&&o.classList.add(i),t){l.classList.add("jeql-cursor-pointer");let e=tn("span").buildClass("jeql-modal-close").buildHTML("&times;");o.appendChild(e),e.addEventListener("click",(function(){document.body.removeChild(l)})),l.addEventListener("click",(function(e){e.target===l&&document.body.removeChild(l)}),!1)}let r=o.buildChild("div");r.closeModal=function(){l.parentElement.removeChild(l)},e(r)}function rn(e,t=null,n="Success!"){t||(t=function(){}),on((function(i){let l=i.closeModal;i.closeModal=function(){l(),t()},i.buildHTML(`\n            <h1>${n}</h1>\n            ${e}\n        `).buildChild("button").buildText("Ok").buildClass(ct).buildEventListener("click",(function(){i.closeModal()}))}),!1)}function un(e,t="Error!"){}function an(e,t,n="Are you sure?",i="Yes",l="No"){on((function(o){o.buildHTML(`\n            <h1>${n}</h1>\n            ${e}\n        `).buildChild("button").buildText(i).buildClass([ct,dt]).buildEventListener("click",(function(){o.closeModal(),t()})).buildSibling("button").buildText(l).buildClass([ct,pt]).buildEventListener("click",o.closeModal)}),!1)}function sn(e,t){document.getElementById(e).addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById(t).click())}))}function cn(e,t,n=null){null===n&&(n=function(){document.getElementById(t).focus()}),document.getElementById(e).onkeypress=function(t){Number.parseInt(t.key)||0===Number.parseInt(t.key)?(document.getElementById(e).value=t.key,n()):t.preventDefault()}}function dn(e){let t={};return e?(t.mfa_key=document.getElementById(Lt).value+document.getElementById(Ct).value+document.getElementById(Ot).value+document.getElementById(yt).value+document.getElementById(vt).value+document.getElementById(Dt).value,t.pre_auth_key=e):(t[Me]=document.getElementById(It).value,t[Fe]=document.getElementById(Nt).value),t}function pn(e,t){document.getElementById(gt).innerHTML=t+"<br>";let n=e.getElementsByClassName("jeql-input");for(let e in n)n.hasOwnProperty(e)&&(n[e].style.borderColor="red")}function mn(e,t){t||(t=function(){}),e.closeModal=function(){e.innerHTML=""},en(e),fn(e,window.JEQL_CONFIG,t,null)}function En(e,t,n){let i=window.JEQL_CONFIG;t!==i.rememberMe&&(i.logout(!1,!0),i.setRememberMe(t)),T(window.JEQL_CONFIG,j,n,e)}function fn(e,t,n,i){e.id="jeql-login-modal",e.appendChild(tn("div").buildClass("jeql-center").buildHTML("\n        <h1>\n            Login\n        </h1>\n    "));let l=tn("div").buildHTML('\n        <span id=jeql-login-error style="color: red"></span>\n        <br>\n        <label class="jeql-strong">\n            Username\n            <input class="jeql-input jeql-input-full" type="text" placeholder="Enter username" id=jeql-username>\n        </label>\n        <label class="jeql-strong">\n            Password \n            <input class="jeql-input jeql-input-full" type="password" placeholder="Enter password" id=jeql-password>\n        </label>\n    ');e.appendChild(l),i&&(document.getElementById(gt).innerHTML=i+"<br>");let o=e.buildChild("div").buildHTML('\n        <label for=jeql-remember-me>Remember me</label>\n        <input type="checkbox" id=jeql-remember-me>\n    ');o.checked=t.rememberMe;let r=function(e){return e.buildChild("button").buildClass(ct).buildText("Login").buildAttr("id",jt)},u=tn("div"),a=r(u);e.appendChild(u),a.addEventListener("click",(function(){document.getElementById(St).checked!==t.rememberMe&&(t.logout(!1,!0),t.setRememberMe(document.getElementById(St).checked)),T(t,j,(function(i,a){if(a){l.innerHTML="",o.removeElement();let a=l.buildChild("span").buildAttr("style","display: none");u.innerHTML="";let s=u.buildChild("button").buildClass(ct).buildText("Back");r(u),setTimeout((function(){a.innerText="MFA timeout hit. Please login again",s.click()}),12e4),s.addEventListener("click",(function(){e.closeModal();let i=null;0!==a.innerText.length&&(i=a.innerText),Tn(t,n,i)})),function(e,t,n,i,l){t.buildHTML('\n        <span id=jeql-login-error style="color: red"></span>\n        <br>\n        <label class="jeql-strong">\n            2FA\n            <br>\n            <div style="width: 100%; display: flex; gap: 1%">\n                <input class="jeql-input jeql-input-mfa" type="text" id=jeql-mfa-0 maxlength="1" size="1">\n                <input class="jeql-input jeql-input-mfa" type="text" id=jeql-mfa-1 maxlength="1" size="1">\n                <input class="jeql-input jeql-input-mfa" type="text" id=jeql-mfa-2 maxlength="1" size="1">\n                <input class="jeql-input jeql-input-mfa" type="text" id=jeql-mfa-3 maxlength="1" size="1">\n                <input class="jeql-input jeql-input-mfa" type="text" id=jeql-mfa-4 maxlength="1" size="1">\n                <input class="jeql-input jeql-input-mfa" type="text" id=jeql-mfa-5 maxlength="1" size="1">\n            </div>\n        </label>\n    '),cn(Lt,Ct),cn(Ct,Ot),cn(Ot,yt),cn(yt,vt),cn(vt,Dt),cn(Dt,null,(function(){document.getElementById(jt).click()})),sn(Dt,jt),document.getElementById(jt).addEventListener("click",(function(){T(n,j,(function(t){t?(pn(e,t),document.getElementById(Lt).focus(),document.getElementById(Lt).value="",document.getElementById(Ct).value="",document.getElementById(Ot).value="",document.getElementById(yt).value="",document.getElementById(vt).value="",document.getElementById(Dt).value=""):(e.closeModal(),i())}),dn(l))})),document.getElementById(Lt).focus()}(e,l,t,n,i)}else i?(pn(e,i),document.getElementById(It).focus()):(e.closeModal(),n())}),dn())})),sn(It,jt),sn(Nt,jt),document.getElementById(It).focus()}function Tn(e,t,n){e.credentials?T(e,j,t,e.credentials):on((function(i){fn(i,e,t,n)}),!1)}function hn(e,t){b(e,e.refreshAction,t)}function bn(e){let t="",n="_";for(let i=0;i<e.length;i++){let l=e[i];t+="_"===n?l.toUpperCase():l,n=l}return t.replace("_"," ")}function An(e){let t=null,n=[];return location.search.substr(1).split("&").forEach((function(i){n=i.split("="),n[0]===e&&(t=decodeURIComponent(n[1]))})),t}function _n(e){let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}function gn(e,t){let n=e.getItem(t);return n?n=JSON.parse(n):(n={},e.setItem(t,JSON.stringify(n))),n}function In(e,t,n){let i={};i[He]=e.getApplicationName(),i[Ge]=n,h(e,"GET /configurations/assigned-databases",(function(i){!function(e,t,n,i){let l={};for(let e in i)l[i[e][Ce]]=i[e].connection;let o={};o.connections=l,o[$e]=n;let r=gn(e.getStorage(),S);r[e.base][e.getApplicationName()]=o,e.getStorage().setItem(S,JSON.stringify(r)),t(e)}(e,t,n,i)}),i)}function Nn(e,t=null){null===t&&(t=function(){console.error("Tried to get app config in an imperative manner yet app config was not set")});let n={};n[He]=e.getApplicationName(),h(e,"GET /configurations",(function(n){!function(e,t,n){1===n.length?In(e,t,n[0][Ge]):0===n.length?console.error("No configuration found for user"):on((function(i){let l=Sn(e,null,!1,!0)[$e];i.appendChild(tn("h1").buildText("Select Configuration"));let o=tn("table");i.appendChild(o);let r=o.buildChild("tr");for(let e in Object.keys(n[0]))r.buildChild("th").buildText(bn(Object.keys(n[0])[e]));r.buildChild("th");for(let r in n){let u=o.buildChild("tr");n[r][Ge]===l&&u.buildClass("jeql-selected-app-config");for(let e in n[r])u.buildChild("td").buildText(n[r][e]);u.buildChild("td").buildHTML(`\n                    <button id="${wt+r}" class="${ct}">Select</button>\n                `),Ln(document.getElementById(wt+r),n[r]),document.getElementById(wt+r).addEventListener("click",(function(n){var l;i.closeModal(),In(e,t,(l=n.target,JSON.parse(atob(l.getAttribute(bt))))[Ge])}))}}),!1,ut)}(e,t,n)}),n)}function Sn(e,t=null,n=!1,i=!1){let l=t;if(t){let n=Cn(),i=On();l=function(...l){document.currentScriptParent=n,document.theCurrentScript=i,e.releaseQueues(),t(...l)}}let o=function(e,t=!1){try{let n=e.getApplicationName(),i=null;t&&(i=An("configuration"));let l=gn(e.getStorage(),S);if(null===i){let t={};e.base in l?t=l[e.base]:l[e.base]=t,n in t?i=t[n]:t[n]=i}else{i=i.split(",");let t=i.shift(),o=e=>({[_n(e).name]:e});o=Object.assign({},...i.map(o)),i={},i[$e]=t,i.connections=o;let r={};e.base in l?r=l[e.base]:l[e.base]=r,r[n]=i}return e.getStorage().setItem(S,JSON.stringify(l)),i}catch(e){console.error("Error when loading app config, wiping config"),console.error(e),console.getStorage().removeItem(S)}}(e,n);if(null!==o&&o.constructor===Object&&"connections"in o&&$e in o)return l?void l(e):(e.releaseQueues(),o);i||Nn(e,l);let r={connections:{}};return r[$e]=null,r}function Ln(e,t){e.setAttribute(bt,btoa(JSON.stringify(t)))}function Cn(){return document.currentScript?document.currentScript.parentElement:document.hasOwnProperty("currentScriptParent")?document.currentScriptParent:document.currentScript}function On(){return document.currentScript?document.currentScript:document.hasOwnProperty("theCurrentScript")?document.theCurrentScript:document.currentScript}function yn(e){return e.hasOwnProperty("parameter")&&(e.parameters=e.parameter,delete e.parameter),e.hasOwnProperty("select")&&(e.query="SELECT "+e.select,delete e.select),e}function vn(){return On().previousElementSibling}function Dn(e,t,n=!0){e.constructor!==Object&&(e=Kn(window.JEQL_CONFIG,e));let i=Cn(),l=On();$n(window.JEQL_CONFIG,e,(function(e){document.currentScriptParent=i,document.theCurrentScript=l;for(let i=0;i<e[je].length;i++)n?t(zt(e[je][i],e[we])):t(e[je[i]],e[we])}))}function jn(e,t,n){let i=t;t.constructor===Object&&(i=function(e){let n=null;if(0===e[je].length)"alternative"in t&&t.alternative(e[we]);else{"introducer"in t&&(n=t.introducer(e[we]));for(let i=0;i<e[je].length;i++)"expression"in t&&t.expression(e[je][i],n),"separator"in t&&t.separator(e[je][i],n);"terminator"in t&&t.terminator(e[we],n)}}),n||(n=window.JEQL_CONFIG),$n(window.JEQL_CONFIG,e,i)}function wn(e,t){b(e,"GET /applications",t)}function Bn(e,t){wn(e,(function(e){e=e[Ve];for(let n in e)if(e[n][$e]===t)return e[n][Je];throw`Could not find application with name '${t}'`}))}function Pn(e,t){let n=t.connection,i=Sn(e).connections;if(n){if(!(n in i))throw new Error("Dataset '"+n+" does not exist");t.connection=i[n]}else{if(Object.keys(i).length>1)throw new Error("Must supply dataset as multiple datasets exist");0===i.length&&Nn(e),t.connection=i[Object.keys(i)[0]]}}function kn(e,t,n=null){Rn(e,t,!1,n,!1)}function Mn(e,t){if(window.hasOwnProperty("JEQL_CONFIG"))return window.JEQL_CONFIG;{null===t?t=function(){let e=An("jaaql");if(null!==e)return e;let t=window.location.protocol;return"file:"===t?t="http://127.0.0.1:6060":t+="/api",t}():(t.startsWith("http")||(t="https://"+t),t.endsWith("/api")||(t+="/api"));let n=new u(e,t,j,"POST /oauth/refresh",Tn,hn,ln,[ne,ie],Pn,Me,Nn,(function(e,n){let i=gn(e,N);i[t]=n,e.setItem(N,JSON.stringify(i))}),(function(e,t,n,i){n&&(i.setItem(N,e.getItem(N)),i.setItem(S,e.getItem(S))),e.removeItem(N),e.removeItem(S),t&&window.location.reload()}));return n.setRememberMe(null!==window.localStorage.getItem(N)),window.JEQL_CONFIG=n,n}}function Rn(e,t,n=!0,i=null,l=!0){t||(t=function(){});let o=Mn(e,i);if(!l){let t={};t[He]=e;let n=A(o,"GET /applications/public-user",null,t,null,!1);if(!n)return void console.error("No public user for application "+e);o.setCredentials(n)}let r=gn(o.getStorage(),N),u=null;return o.base in r&&(u=r[o.base]),o.authToken=u,Sn(o.clone(),t,!0),o}function qn(e,t){let n={};n.invite_key=e,T(window.JEQL_CONFIG,D,(function(e){e.hasOwnProperty(Le)?t(e[Le]):t()}),n)}function xn(e,t){t||(t=function(){}),"function"!=typeof t&&(t=function(e){window.location.replace(handleFunc+"?token="+e)}),e[He]=window.JEQL_CONFIG.applicationName;let n=function(e){t(e.invite_key)};if(e.hasOwnProperty(e[Ne]))A(window.JEQL_CONFIG,v,n,null,e);else{let t={};t[He]=window.JEQL_CONFIG.applicationName,A(window.JEQL_CONFIG,"GET /applications/default-templates",(function(t){e[Ne]=t[Ne],e[Se]=t[Se],A(window.JEQL_CONFIG,v,n,null,e)}),t)}}function Fn(e,t,n){let i={};i.invite_key=e,i[Fe]=t,request.makeSimple(window.JEQL_CONFIG,D,n,null,i)}function Gn(e,t,n,i){"function"!=typeof n&&(n=function(){window.location.replace(n+"?token="+e)}),Fn(e,t,n)}function Hn(e,t,n,i,l,o){Un(e,null,t,n,i,l,o)}function Un(e,t,n,i,l,o,r){let u={};u.invite_or_poll_key=e,t&&(u.invite_code=t);let a={200:function(e){let t=e.invite_key_status;t===C?i():t===O?l():t===y?o():n()}};a[422]=r,request.makeSimple(window.JEQL_CONFIG,"POST /account/signup/poll",a,null,u)}function Jn(e,t){Nn(t,(function(){console.error("Could not refresh app config connection token")}))}function Yn(e,t,n,i,l,o){let r=Sn(t),u={};for(let e in r.connections)u[r.connections[e]]=e;In(t,(function(){let e=Sn(t);o=o?JSON.parse(o):d(l);let r=!0;Array.isArray(o)||(r=!1,o=[o]);for(let t in o)o[t].connection=e.connections[u[o[t].connection]];r||(o=o[0]),l&&(l=a(o),o=void 0);let s={...i};s[419]=Jn,f(t,n,s,l,o)}),r[$e])}function Kn(e,t,n=null,i=null,l=null){null===n&&(n={});let o={};return o.query=t,o[Le]=n,o.connection=i,o[ve]=l,o}function Qn(e,t,n){$n(e,t,n,!1,!0)}function $n(e,t,n,i=!1,l=!1){let o=n;n.constructor!==Object&&((n={})[g]=o),n[419]=i?Jn:Yn,T(e,l?ie:ne,n,t)}let Wn=document.currentScript,zn=Wn.getAttribute("application"),Vn=!0,Xn=!1;if(Wn.hasAttribute("access")){Xn=!0;let e=Wn.getAttribute("access");"public"===e?Vn=!1:"authenticated"===e||console.error("JEQL access must be either 'public' or 'authenticated'")}let Zn=null;Wn.hasAttribute("jaaql")&&(Zn=Wn.getAttribute("jaaql")),Xn&&(Vn?Rn(zn,null,!0,Zn):kn(zn,null,Zn));const ei=t})(),i.default})()));